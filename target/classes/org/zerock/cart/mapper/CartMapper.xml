<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.zerock.cart.mapper.CartMapper">

	<!-- 장바구니 목록 조회 -->
    <select id="cartList" parameterType="string" resultType="org.zerock.cart.vo.CartItemVO">
        SELECT *
        FROM cart
        WHERE id = #{id}
    </select>
    
    <select id="getCartItem" parameterType="map" resultType="org.zerock.cart.vo.CartItemVO">
	    SELECT *
	    FROM cart
	    WHERE goods_no = #{goods_no} AND id = #{id}
	</select>

    <!-- 장바구니 상품 수량 업데이트 -->
    <update id="updateCartItem" parameterType="map">
	    UPDATE cart
	    SET quantity = #{quantity}, goods_total_price = #{goods_total_price}
	    WHERE goods_no = #{goods_no} AND id = #{id}
	</update>
	
	<!-- 장바구니 선택 여부 업데이트 -->
	<update id="updateSelection">
	    UPDATE cart 
	    SET selected = #{selected} 
	    WHERE goods_no = #{goodsNo} AND id = #{id}
	</update>

    <!-- 총 가격 업데이트 -->
    <update id="updateGoodsTotalPrice">
        UPDATE cart
        SET goods_Tprice = #{goods_Tprice}
        WHERE goods_no = #{goods_no}
    </update>

    <!-- 상품 번호로 장바구니 아이템 조회 -->
    <select id="getCartItemByGoodsNo" parameterType="string" resultType="org.zerock.cart.vo.CartItemVO">
        SELECT *
        FROM cart
        WHERE goods_no = #{goods_no}
    </select>
</mapper>
